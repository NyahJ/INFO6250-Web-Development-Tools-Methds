{"version":3,"file":"chat-web.js","mappings":"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","sources":["webpack://project2/./src/chat-web.js","webpack://project2/./src/constants.js","webpack://project2/./src/listeners.js","webpack://project2/./src/render.js","webpack://project2/./src/services.js","webpack://project2/./src/state.js","webpack://project2/webpack/bootstrap","webpack://project2/webpack/runtime/define property getters","webpack://project2/webpack/runtime/hasOwnProperty shorthand","webpack://project2/webpack/runtime/make namespace object","webpack://project2/webpack/before-startup","webpack://project2/webpack/startup","webpack://project2/webpack/after-startup"],"sourcesContent":["import { SERVER, CLIENT } from './constants';\nimport state, {\n  login,\n  logout,\n  waitOnLogin,\n  setMessages,\n  setError,\n  setOnlineUsers,\n} from './state';\nimport {\n  fetchLogin,\n  fetchLogout,\n  fetchSendMessage,\n  fetchMessageList,\n  fetchSession,\n  fetchOnlineUsers,\n} from './services';\nimport render from './render';\nimport {\n  addAbilityToLogin,\n  addAbilityToLogout,\n  addAbilityToSendMessage,\n} from './listeners';\n\n\n// Main codes here\nconst appEl = document.querySelector('#app');\nrender({ state, appEl });\naddAbilityToLogin({ state,  appEl });\naddAbilityToLogout({ state, appEl });\n//addAbilityToRefresh({ state, appEl });\naddAbilityToSendMessage({ state, appEl });\ncheckForSession();\npollCheckForSession();\n\nexport function checkForSession() {\n  fetchSession()\n  .then( session => {\n    login(session.username);\n    render({ state, appEl });\n    return fetchMessageList();\n  })\n  .catch( err => {\n    if( err?.error === SERVER.AUTH_MISSING ) {\n      return Promise.reject({ error: CLIENT.NO_SESSION })\n    }\n    return Promise.reject(err);\n  })\n  .then( messages => {\n    setMessages(messages);\n    render({ state, appEl });\n    return fetchOnlineUsers();\n  })\n  .catch( err => {\n    if( err?.error === SERVER.AUTH_MISSING ) {\n      return Promise.reject({ error: CLIENT.NO_SESSION })\n    }\n    return Promise.reject(err);\n  })\n  .then( onlineUsers => {\n    setOnlineUsers(onlineUsers);\n    render({ state, appEl });\n  })\n  .catch( err => {\n    if( err?.error == CLIENT.NO_SESSION ) {\n      logout();\n      render({ state, appEl });\n      return;\n    }\n\n      setError(err?.error || 'ERROR');\n      render({ state, appEl });\n    });\n}\n\nfunction pollCheckForSession() {\n    checkForSession();\n    setInterval( pollCheckForSession, 10000 );\n}","export const SERVER = {\n  AUTH_MISSING: 'auth-missing',\n  AUTH_INSUFFICIENT: 'auth-insufficient',\n  REQUIRED_USERNAME: 'required-username',\n  REQUIRED_TASK: 'required-task',\n  TASK_MISSING: 'noSuchId',\n};\n\nexport const CLIENT = {\n  NETWORK_ERROR: 'networkError',\n  NO_SESSION: 'noSession',\n};\n\nexport const MESSAGES = {\n  // The [] below uses the variable value as the key\n  [CLIENT.NETWORK_ERROR]: 'Trouble connecting to the network.  Please try again',\n  // Here we use 'dog' to simulate a bad password\n  [SERVER.AUTH_INSUFFICIENT]: 'Your username/password combination does not match any records, please try again.',\n  [SERVER.REQUIRED_USERNAME]: 'Please enter a valid (letters and/or numbers) username',\n  [SERVER.REQUIRED_TASK]: 'Please enter the task to do',\n  default: 'Something went wrong.  Please try again',\n};","import {\n  fetchLogin,\n  fetchLogout,\n  fetchSendMessage,\n  fetchMessageList,\n  fetchSession,\n} from './services';\n\nimport {\n  waitOnLogin,\n  setError,\n  login,\n  logout,\n  addMessage,\n  setMessages,\n  setOnlineUsers,\n} from './state';\n\nimport {\n    checkForSession,\n} from './chat-web'\n\nimport render from './render';\n\nexport function addAbilityToLogin({ state,  appEl }) {\n  appEl.addEventListener('submit', (e) => {\n    e.preventDefault();\n    if(!e.target.classList.contains('login-form')) {\n      return;\n    }\n\n    const username = appEl.querySelector('.login-username').value;\n    waitOnLogin();\n    render({ state, appEl });\n    fetchLogin( username )\n    .then( username => {\n      checkForSession();\n    })\n    .catch( err => {\n      setError(err?.error || 'ERROR'); // Ensure that the error ends up truthy\n      render({ state, appEl });\n    });\n\n  });\n}\n\nexport function addAbilityToLogout({ state, appEl }) {\n  appEl.addEventListener('click', (e) => {\n    if(!e.target.classList.contains('controls__logout')) {\n      return;\n    }\n    logout();\n    render({ state, appEl });\n    fetchLogout()\n    .catch( err => {\n      setError(err?.error || 'ERROR');\n      render({ state, appEl });\n    });\n  });\n}\n\nexport function addAbilityToSendMessage({ state, appEl }) {\n  appEl.addEventListener('submit', (e) => {\n    if(!e.target.classList.contains('add-form')) {\n      return;\n    }\n\n    const username = e.target.username;\n    const newMessage = appEl.querySelector('.send-message').value;\n    fetchSendMessage(newMessage)\n    .then( message => {\n      //addMessage({ message, username });\n      checkForSession();\n    })\n    .catch( err => {\n      console.log(err);\n      setError(err?.error || 'ERROR'); // Ensure that the error ends up truthy\n      render({ state, appEl });\n    });\n  });\n}\n","function render({ state, appEl }) {\n  const html = `\n   <main class=\"\">\n     ${ generateStatusHtml( state ) }\n     ${ generateLoginHtml( state ) }\n     ${ generateContentHtml( state ) }\n   </main>\n  `;\n  appEl.innerHTML = html;\n}\n\nfunction generateStatusHtml( state ) {\n  return `\n      <div class=\"status\">${state.error}</div>\n  `;\n}\n\nfunction generateLoginHtml( state ) {\n  if(state.isLoginPending) {\n    return `\n      <div class=\"login__waiting\">Loading user...</div>\n    `\n  }\n  if(state.isLoggedIn) {\n    return ``;\n  }\n\n  return `\n      <div class=\"login\">\n        <form class=\"login-form\" action=\"#/login\">\n          <label>\n            <h3 class=\"word\">Username:</h3>\n            <input class=\"login-username\" value=\"\">\n          </label>\n          <button class=\"login__button\" type=\"submit\">Login</button>\n        </form>\n      </div>\n  `;\n}\n\nfunction generateContentHtml( state ) {\n  if(!state.isLoggedIn) {\n    return ``;\n  }\n  if(state.isLoginPending) {\n    return `\n      <div class=\"content\">\n        ${generateControlsHtml( state )}\n        <div class=\"todos__waiting\">Loading Messages...</div>\n      </div>\n    `;\n  }\n  return `\n      <div class=\"content\">\n        ${generateControlsHtml( state )}\n        <h4> Online Users </h4>\n        ${generateOnlineUsersHtml( state )}\n        <HR align=center width=600 color=#987cb9 SIZE=2>\n        <h4> Messages </h4>\n        <ul class=\"message\">${generateMessageHtml( state )}</ul>\n        ${generateSendMessageHtml( state )}\n      </div>\n  `;\n}\n\nfunction generateControlsHtml( state ) {\n  return `\n        <div class=\"controls\">\n          <button class=\"controls__logout\">Logout</button>\n        </div>\n  `;\n}\n\nfunction generateMessageHtml( state ) {\n  const messageHtml = Object.values(state.messageList).map( message => {\n    return `\n      <li class=\"message\">\n        <span>${message.username}:</span>\n          ${message.message}\n      </li>\n      `;\n  }).join('') || `<p class=\"message\">No message, add one!</p>`;\n  return messageHtml;\n}\n\nfunction generateOnlineUsersHtml( state ) {\n  const onlineUsersHtml = Object.values(state.onlineUsers).map( onlineUser => {\n    return `\n      <li class=\"message\">\n        <span>${onlineUser.username}</span>\n      </li>\n      `;\n  }).join('') || `<p class=\"message\">Nobody</p>`;\n  return onlineUsersHtml;\n}\n\nfunction generateSendMessageHtml( state ) {\n  return `\n        <form class=\"add-form\" action=\"#/add\">\n          <input username=\"${state.username}\" class=\"send-message\" placeholder=\"Type here\">\n          <button type=\"submit\" class=\"send-button\">Send</button>\n        </form>\n  `;\n}\n\nexport default render;","export function fetchSendMessage(message) {\n  return fetch('/api/v1/messages', {\n    method: 'POST',\n    headers: new Headers({\n      'content-type': 'application/json',\n    }),\n    body: JSON.stringify( { message } ),\n  })\n  .catch( () => Promise.reject({ error: 'networkError' }) )\n  .then( response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return response.json()\n    .catch( error => Promise.reject({ error }) )\n    .then( err => Promise.reject(err) );\n  });\n}\n\nexport function fetchMessageList() {\n  return fetch('/api/v1/messages', {\n    method: 'GET',\n  })\n  .catch( () => Promise.reject({ error: 'networkError' }) )\n  .then( response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return response.json()\n    .catch( error => Promise.reject({ error }) )\n    .then( err => Promise.reject(err) );\n  });\n}\n\nexport function fetchSession() {\n  return fetch('/api/v1/session', {\n    method: 'GET',\n  })\n  .catch( () => Promise.reject({ error: 'networkError' }) )\n  .then( response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return response.json()\n    .catch( error => Promise.reject({ error }) )\n    .then( err => Promise.reject(err) );\n  });\n}\n\nexport function fetchLogout() {\n  return fetch('/api/v1/session', {\n    method: 'DELETE',\n  })\n  .catch( () => Promise.reject({ error: 'networkError' }) )\n  .then( response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return response.json()\n    .catch( error => Promise.reject({ error }) )\n    .then( err => Promise.reject(err) );\n  });\n}\n\nexport function fetchLogin(username) {\n  return fetch('/api/v1/session', {\n    method: 'POST',\n    headers: new Headers({\n      'content-type': 'application/json'\n    }),\n    body: JSON.stringify({ username }),\n  })\n  .catch( () => Promise.reject({ error: 'networkError' }) )\n  .then( response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return response.json()\n    .catch( error => Promise.reject({ error }) )\n    .then( err => Promise.reject(err) );\n  });\n}\n\nexport function fetchOnlineUsers() {\n  return fetch('/api/v1/sessions', {\n    method: 'GET',\n  })\n  .catch( () => Promise.reject({ error: 'networkError' }) )\n  .then( response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return response.json()\n    .catch( error => Promise.reject({ error }) )\n    .then( err => Promise.reject(err) );\n  });\n}","import { MESSAGES } from './constants';\n\nconst state = {\n  messageList: {},\n  onlineUsers: {},\n  isLoggedIn: false,\n  isLoginPending: true,\n  isMessagePending: false,\n  username: '',\n  error: '',\n};\n\nexport function waitOnLogin() {\n  state.isLoggedIn = false;\n  state.isLoginPending = true;\n  state.username = '';\n  state.messageList = {};\n  state.error = '';\n}\n\nexport function login(username) {\n  state.isLoggedIn = true;\n  state.isLoginPending = false;\n  state.username = username;\n  state.error = '';\n}\n\nexport function logout() {\n  state.isLoggedIn = false;\n  state.isLoginPending = false;\n  state.username = '';\n  state.error = '';\n}\n\nexport function setMessages(messageList) {\n  state.messageList = messageList;\n  state.isMessagePending = false;\n  state.error = '';\n}\n\nexport function setOnlineUsers(onlineUsers) {\n  state.onlineUsers = onlineUsers;\n  state.isMessagePending = false;\n  state.error = '';\n}\n\nexport function addMessage({ id, newMessage }) {\n  state.messageList[id] = newMessage;\n  state.error = '';\n}\n\nexport function setError(error) {\n  console.log(error);\n  if(!error) {\n    state.error = '';\n    return;\n  }\n  state.error = MESSAGES[error] || MESSAGES.default;\n}\n\nexport default state;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/chat-web.js\");\n",""],"names":["SERVER","CLIENT","state","login","logout","waitOnLogin","setMessages","setError","setOnlineUsers","fetchLogin","fetchLogout","fetchSendMessage","fetchMessageList","fetchSession","fetchOnlineUsers","render","addAbilityToLogin","addAbilityToLogout","addAbilityToSendMessage","appEl","document","querySelector","checkForSession","pollCheckForSession","then","session","username","err","error","AUTH_MISSING","Promise","reject","NO_SESSION","messages","onlineUsers","setInterval","AUTH_INSUFFICIENT","REQUIRED_USERNAME","REQUIRED_TASK","TASK_MISSING","NETWORK_ERROR","MESSAGES","addMessage","addEventListener","e","preventDefault","target","classList","contains","value","newMessage","message","console","log","html","generateStatusHtml","generateLoginHtml","generateContentHtml","innerHTML","isLoginPending","isLoggedIn","generateControlsHtml","generateOnlineUsersHtml","generateMessageHtml","generateSendMessageHtml","messageHtml","Object","values","messageList","map","join","onlineUsersHtml","onlineUser","fetch","method","headers","Headers","body","JSON","stringify","response","ok","json","isMessagePending","id"],"sourceRoot":""}